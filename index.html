<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Architekturbüro ebbe&flut</title>
  <style>
    body {
      margin: 0;
      background: #fff;
      font-family: 'Inter', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .logo-container {
      position: relative;
      width: 600px;
      height: 300px;
      cursor: pointer;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    #hoverImage {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 5s ease;
      object-fit: contain;
      z-index: 10;
      pointer-events: none;
    }

    #hoverImage.visible {
      opacity: 0.1;
    }
  </style>
</head>
<body>

<div class="logo-container" id="logoContainer">
  <svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
    <path id="wavePath" stroke="#002f6c" stroke-width="12" fill="none" stroke-linecap="round" />
    <text x="300" y="60" text-anchor="middle" font-size="18" fill="#002f6c">ARCHITEKTURBÜRO</text>
    <text x="120" y="140" font-size="64" fill="#002f6c">ebbe</text>
    <text x="290" y="140" font-size="64" fill="#002f6c">&amp;</text>
    <text x="290" y="210" font-size="64" fill="#002f6c">flut</text>
  </svg>
  <img src="bruno.png" id="hoverImage" alt="" />
</div>

<script>
  const path = document.getElementById("wavePath");
  const container = document.getElementById("logoContainer");
  const hoverImage = document.getElementById("hoverImage");

  const width = 600;
  const height = 300;
  const baseY = 230;

  const points = 120;
  const spacing = width / (points - 1);

  let y = new Array(points).fill(baseY);
  let velocity = new Array(points).fill(0);
  let acceleration = new Array(points).fill(0);

  const k = 0.025; // Spring stiffness
  const damping = 0.02; // Resistance
  const spread = 0.25; // Neighbor pull strength

  function updateWave() {
    for (let i = 0; i < points; i++) {
      let dy = baseY - y[i];
      acceleration[i] = k * dy - velocity[i] * damping;
      velocity[i] += acceleration[i];
      y[i] += velocity[i];
    }

    // spread to neighbors
    let leftDeltas = new Array(points);
    let rightDeltas = new Array(points);

    for (let j = 0; j < 8; j++) { // multiple passes for smoother spread
      for (let i = 0; i < points; i++) {
        if (i > 0) {
          leftDeltas[i] = spread * (y[i] - y[i - 1]);
          velocity[i - 1] += leftDeltas[i];
        }
        if (i < points - 1) {
          rightDeltas[i] = spread * (y[i] - y[i + 1]);
          velocity[i + 1] += rightDeltas[i];
        }
      }
    }
  }

  function drawWave() {
    let d = `M 0,${y[0].toFixed(2)}`;
    for (let i = 1; i < points; i++) {
      const x = i * spacing;
      d += ` L ${x.toFixed(2)},${y[i].toFixed(2)}`;
    }
    path.setAttribute("d", d);
  }

  function animate() {
    updateWave();
    drawWave();
    requestAnimationFrame(animate);
  }

  animate();

  // Hover-Stoß
  container.addEventListener("mousemove", (e) => {
    const rect = container.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const index = Math.floor((x / width) * points);
    if (index >= 0 && index < points) {
      velocity[index] -= 2; // kleine Ablenkung
    }
  });

  container.addEventListener("mouseenter", () => {
    hoverImage.classList.add("visible");
  });

  container.addEventListener("mouseleave", () => {
    hoverImage.classList.remove("visible");
  });

  // Klick-Stoß mit Weiterleitung
  container.addEventListener("click", () => {
    for (let i = 0; i < points; i++) {
      velocity[i] -= Math.sin((i / points) * Math.PI) * 10; // große Brechung
    }

    setTimeout(() => {
      window.location.href = "vita.html";
    }, 1500); // nach Beruhigung
  });
</script>

</body>
</html>
